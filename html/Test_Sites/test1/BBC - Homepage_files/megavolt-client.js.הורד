define("megavolt-client",["module"],function(t){function e(t){var e=window.location.href;t=t.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)"),r=n.exec(e);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null}function n(t,e){for(var n in e)t[n]=e[n];return t}function r(t){try{var r=JSON.parse(e("overriddenBuckets"));if(null!==r&&"object"==typeof r)return n(n({},t),r)}catch(t){}return t}function o(){return null!==e("overriddenBuckets")}function c(){w=!1}function i(){M=!1}function a(){if(M=!1,R.length>0){var t=R.shift();y(t.options,t.done)}}function u(t,e){try{t.open("GET",e,!0),t.send()}catch(t){}}function f(t,e,n){try{t.open("POST",e,!0),t.setRequestHeader("Content-type","application/json"),t.send(JSON.stringify(n))}catch(t){}}function s(t,e){a(),t(e)}function v(t){var e=new XMLHttpRequest,n={};return e.withCredentials=!0,e.onreadystatechange=function(){if(e.readyState===XMLHttpRequest.DONE){try{var o=JSON.parse(e.responseText);200!==e.status||o.error||(n=o.buckets.reduce(function(t,e){return t[e.experiment]=e.variant,t},{}),d(n))}catch(t){}a(),t(r(n))}},e.onerror=function(e){s(t,n)},e.onabort=function(){s(t,n)},e.ontimeout=function(){s(t,n)},e}function p(t){var e=new XMLHttpRequest;return e.withCredentials=!0,e.onreadystatechange=function(){e.readyState===XMLHttpRequest.DONE&&t()},e.onerror=function(e){t()},e.onabort=function(){t()},e.ontimeout=function(){t()},e}function d(t){var e=new Date;e.setMonth(e.getMonth()+3);var n="; expires="+e.toGMTString(),r="object"==typeof t?JSON.stringify(t):t;document.cookie="ckpf_mvt_buckets="+r+n+"; path=/",w=!0}function l(){try{var t=document.cookie.replace(/(?:(?:^|.*;\s*)ckpf_mvt_buckets\s*\=\s*([^;]*).*$)|^.*$/,"$1");return JSON.parse(t)}catch(t){return}}function h(t,e){var n=v(e),r=O+"/buckets?activate=";r+=void 0===t.activate||o()?"false":t.activate,u(n,r)}function y(t,e){var n;if("function"==typeof t?(n={},e=t):n=t,M)R.push({options:n,done:e});else{M=!0;var o;n.noCache||n.activate||(o=l()),o?(e(r(o)),w?a():h({activate:!1},function(){})):h(n,e)}}function g(t){return Object.keys(t).reduce(function(e,n){var r="mvt_"+n;return e[r]=t[n],e},{})}function k(t){y({activate:!1,noCache:!0},function(e){var n=g(e);t(n)})}function b(t){return"[object Array]"===Object.prototype.toString.call(t)}function m(t,e){if(o())return void e();var n=O+"/track";if("string"==typeof t&&(t=[].concat(t)),b(t)){var r=p(e),c=t.map(function(t){return{eventKey:t}}),i={events:c};f(r,n,i)}}var S={version:"1.0.0"},O=t.config().baseUrl,w=!1,M=!1,R=[];return S._resetCacheUpdated=c,S._resetRequestInFlight=i,S.getBuckets=y,S.getMVTIStatsLabels=k,S.trackEvents=m,S});